\RequirePackage[l2tabu, orthodox]{nag}
\RequirePackage{silence}
\WarningFilter{fmtcount}{\ordinal already defined use \FCordinal instead}
\documentclass[english, french]{beamer}
\input{preamble/packages}
\input{preamble/math_basics}
\input{preamble/math_mine}
\input{preamble/redac}
\input{preamble/draw}
\input{preamble/acronyms}
\input{preamble/uml}

\setbeamertemplate{headline}[singleline]
\setbeamertemplate{footline}[onlypage]

\title{Découpe et contrats en génie logiciel}
\subtitle{}
\subject{Génie logiciel}
\keywords{Java, JVM, sous-routines, boite noire}
\author{Olivier Cailloux}
\institute[LAMSADE]{LAMSADE, Université Paris-Dauphine}
\date{Version du \today}

\begin{document}
\bibliographystyle{apalike}

\begin{frame}[plain]
	\tikz[remember picture,overlay]{
		\path (current page.south west) node[anchor=south west, inner sep=0] {
			\includegraphics[height=1cm]{LAMSADE95.jpg}
		};
		\path (current page.south) ++ (0, 1mm) node[anchor=south, inner sep=0] {
			\includegraphics[height=9mm]{Dauphine.jpg}
		};
		\path (current page.south east) node[anchor=south east, inner sep=0] {
			\includegraphics[height=1cm]{PSL.png}
		};
	}
   \titlepage
\end{frame}
\addtocounter{framenumber}{-1}

\section{Découpe en sous-routines}
\subsection{Sous-routines}
\begin{frame}
	\frametitle{Découpe}
	\begin{itemize}
		\item Problèmes résolus par découpe en sous-problèmes
		\item Logiciels : pouvoir s’appuyer sur des blocs dont on oublie les détails
		\item Exemple : calcul d’une racine carrée
		\item Organisation d’une entreprise commerciale ? \pause
		\item Découpe en services
		\item Exemple : secrétariat fournit des accessoires
		\item Organisation d’une société humaine ? \pause
		\item Système judiciaire, exécutif, législatif
		\item Découpe parfois peu étanche !
		\item Raisonnement mathématique
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{Découpe en informatique}
	\begin{itemize}
		\item En fait, que se passe-t-il lors du calcul d’une racine carrée ? \pause
		\item Appel au processeur
		\item Lui-même un solveur de sous-problèmes
		\item Votre environnement d’exécution fait également appel au système d’exploitation
		\item Exemples de gros sous-problèmes déjà résolus pour vous ? \pause
		\item Structures de données : listes, etc.
	\end{itemize}
\end{frame}

\subsection{Interface}
\begin{frame}
	\frametitle{\subsecname}
	\begin{itemize}
		\item Interface entre l’implémentation et le monde extérieur
		\item Penser à l’inter-face entre une cellule et le monde (sa membrane)
		\item Analogue à une entreprise : interface secrétariat
		\item GUI ? \pause Graphical User Interface
		\item Multiples interfaces possibles pour un même service
		\item Exemple entreprise ? \pause Formulaire, demande simple, …
		\item Exemple radiateur ? \pause Boutons différents, à différents endroits, commande vocale, …
		\item Exemple voiture ? \pause Boite automatique VS boite manuelle
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{Interfaces pour différents utilisateurs}
	\begin{itemize}
		\item Une même entité peut avoir différents niveaux d’interface
		\item Interface plus simple, interface plus complète
		\item Exemples ? \pause 
		\item Accès difficiles (réservés aux parents) sur jouet pour enfant
		\item Deux systèmes sur lave-vaisselles
		\item Menu de configuration de votre télévision
		\item Interface pour utilisateur final, interface pour assembleur
		\item Exemples ? \pause Voiture (conduire VS entretenir) ; Système d’exploitation (utiliser VS installer des logiciels)
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{Interfaces pour le programmeur}
	\begin{itemize}
		\item Vous développez des sous-routines
		\item Ces sous-routines sont accessibles à des programmeurs
		\item Y compris vous-même !
		\item Elles peuvent être combinées pour créer différents programmes pour utilisateur final
		\item Elles peuvent être inspectées en cas de bug
		\item API ? \pause Application Programming Interface
		\item Accessible par programme (API ≠ End-user Interface)
		\item Une interface peut aussi être un ensemble d’interfaces !
		\item Exemple ? \pause API de Java
	\end{itemize}
\end{frame}

\section{Contrat}
\subsection{Contrat}
\begin{frame}
	\frametitle{\subsecname}
	\begin{itemize}
		\item Découpe en sous-problèmes résolus par des services
		\item Service fonctionne sous certaines conditions
		\item Contrat : clarification des devoirs de l’utilisateur et du fournisseur de service
		\item Exemple : entier fourni en paramètre > 0
		\item Appelées \emph{préconditions}
		\item \emph{Contrat} entre appelant et programmeur de la sous-routine
		\item Sous ces conditions, méthode fournit un service
		\item Exemple : renvoie un nombre aléatoire entre 0 et l’entier fourni, exclu
		\item Si conditions non remplies : pas de garanties offertes !
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{Contrat à expliciter}
	\begin{itemize}
		\item Contrat facilite l’implémentation de la sous-routine
		\item Contrat facilite la vie de l’utilisateur
		\item À condition de rendre le contrat explicite
		\item Documenter les préconditions
		\item Utilisateur averti : pensera plus probablement à vérifier les préconditions
	\end{itemize}
\end{frame}

\section{Programmation défensive}
\subsection{Programmation défensive}
\begin{frame}
	\frametitle{Échec rapide}
	\begin{itemize}
		\item Principe de l’\emph{échec rapide} (\emph{fail-fast})
		\item Mieux vaut une erreur immédiate qu’une action inattendue (cf. exemple)
		\item Évite les conséquences catastrophiques
		\item Évite que l’erreur passe inaperçue
		\item Facilite les corrections de bug
		\item Deux mises en œuvre : programmation défensive (erreur de l’utilisateur) ; programmation prudente et explicite (erreur du programmeur)
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{Programmation défensive}
	\begin{itemize}
		\item Aider les utilisateurs imprudents
		\item Si précondition non satisfaite : le faire savoir
		\item En pratique : tester les préconditions en entrée de sous-routine {\tiny (sauf si très couteux en temps)}
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{Programmation prudente}
	\begin{itemize}
		\item Tester vos déductions à des endroits cruciaux 
		\item Échec si non valide
		\item Exemple : je sais qu’ici telle valeur devrait être positive
	\end{itemize}
\end{frame}

\section{En pratique}
\begin{frame}
	\frametitle{Sous-routines}
	\begin{itemize}
		\item Sous-routine : entrée (facultative), ensemble d’instructions, sortie (facultative)
		\item Fait qqch
		\item On peut l’appeler sans savoir comment elle procède (boite noire)
		\item \texttt{Math.random();} \texttt{Math.sqrt(4);}
		\item Sous-routine sqrt statique se trouvant dans classe \texttt{Math}
		\item Classes regroupent des variables et sous-routines statiques
		\item \texttt{System.out} : variable statique \texttt{out} dans classe \texttt{System}
		\item Permet d’\emph{organiser} et de \emph{nommer}
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{Intérêt}
	Découper en sous-routines !
	\begin{itemize}
		\item Clarté du code : auto-documentation ; boite noire
		\item Factorisation : application conçue comme assemblage de blocs élémentaires
		\item Éviter la duplication de code (DRY)
		\item Bugs : correction à un seul endroit
		\item Partage du travail entre développeurs
		\item Estimation quantité de travail
		\item Réusinage facilité (trouver tous les endroits où routine est appelée)
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{À faire}
	\begin{itemize}
		\item Découper en sous-routines
		\item Documenter vos contrats
		\item Échouer rapidement (avertir l’utilisateur de vos sous-routines) s’il y a un problème
	\end{itemize}
\end{frame}

\subsection{Factorisation}
\begin{frame}
	\frametitle{\subsecname}
	\begin{itemize}
		\item Code peut se ressembler sans être identique
		\item Modifier pour qu’il soit identique mais paramétré
		\item Exemple : Échecs, dessin du plateau vu du côté noir ou blanc
		\item[⇒] Une seule routine de dessin, paramétrée selon couleur
	\end{itemize}
\end{frame}

\section{Calculateur}
\begin{frame}
	\frametitle{Illustration}
	\begin{itemize}
		\item Calculateur qui additionne
		\item Deux interfaces pour un même service (plusieurs étapes ou une étape)
		\item Deux implémentations pour l’interface en plusieurs étapes
		\item Et si addition seulement de nombres positifs ?
	\end{itemize}
\end{frame}

\appendix
\section{Licence}
\begin{frame}
	\frametitle{Licence}
	Cette présentation, et le code LaTeX associé, sont sous \href{http://opensource.org/licenses/MIT}{licence MIT}. Vous êtes libres de réutiliser des éléments de cette présentation, sous réserve de citer l’auteur.
	
	Le travail réutilisé est à attribuer à \href{http://www.lamsade.dauphine.fr/~ocailloux/}{Olivier Cailloux}, Université Paris-Dauphine.
\end{frame}
\end{document}

\section{Bibliographie}
\begin{frame}[allowframebreaks]
	\frametitle{Bibliographie}
	\def\newblock{\hskip .11em plus .33em minus .07em}
% 	\bibliography{zotero}
\end{frame}

\section{Autres}

\begin{frame}
	\frametitle{\subsecname}
	\begin{itemize}
		\item 
	\end{itemize}
\end{frame}

\end{document}
